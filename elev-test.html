<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bluebikes Simple Display</title>
    <style>
        /* 1. Basic Reset & Dimensions */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            width: 1080px;
            height: 1920px;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f0f0;
            color: #333;
            padding: 60px;
        }

        /* 2. Layout & Typography */
        h1 {
            font-size: 80px;
            margin-bottom: 60px;
            text-align: center;
            color: #1c4587; /* Bluebikes Blue-ish */
            border-bottom: 4px solid #ccc;
            padding-bottom: 30px;
        }

        .station-card {
            background: white;
            border: 2px solid #ddd;
            border-radius: 20px;
            margin-bottom: 40px;
            padding: 40px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .station-name {
            font-size: 50px;
            font-weight: bold;
            margin-bottom: 30px;
            color: #222;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            text-align: center;
            gap: 20px;
        }

        .stat-box {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }

        .stat-number {
            display: block;
            font-size: 70px;
            font-weight: bold;
            color: #1c4587;
        }

        .stat-label {
            display: block;
            font-size: 24px;
            text-transform: uppercase;
            color: #666;
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <h1>Bluebikes Availability</h1>
    <div id="app">Loading data...</div>

    <script>
        // Specific Station IDs for City Hall area
        const TARGET_STATIONS = ['B32008', 'D32009', 'B32032']; 

        async function loadBluebikesData() {
            const container = document.getElementById('app');
            
            try {
                // 1. Get the feed URLs
                const gbfsReq = await fetch('https://gbfs.bluebikes.com/gbfs/gbfs.json');
                const gbfsData = await gbfsReq.json();
                const feeds = gbfsData.data.en.feeds;
                
                const infoUrl = feeds.find(f => f.name === 'station_information').url;
                const statusUrl = feeds.find(f => f.name === 'station_status').url;

                // 2. Fetch Info and Status in parallel
                const [infoRes, statusRes] = await Promise.all([
                    fetch(infoUrl),
                    fetch(statusUrl)
                ]);

                const infoJson = await infoRes.json();
                const statusJson = await statusRes.json();

                // 3. Process Data
                const stationsToRender = [];

                TARGET_STATIONS.forEach(targetId => {
                    const info = infoJson.data.stations.find(s => s.short_name === targetId);
                    const status = statusJson.data.stations.find(s => s.station_id === info?.station_id);

                    if (info && status) {
                        stationsToRender.push({
                            name: info.name,
                            ebikes: status.num_ebikes_available,
                            // Classic bikes = total bikes - ebikes
                            classic: status.num_bikes_available - status.num_ebikes_available,
                            docks: status.num_docks_available
                        });
                    }
                });

                // 4. Render HTML
                let html = '';
                stationsToRender.forEach(s => {
                    html += `
                        <div class="station-card">
                            <div class="station-name">${s.name}</div>
                            <div class="stats-grid">
                                <div class="stat-box">
                                    <span class="stat-number">${s.classic}</span>
                                    <span class="stat-label">Classic</span>
                                </div>
                                <div class="stat-box">
                                    <span class="stat-number">${s.ebikes}</span>
                                    <span class="stat-label">E-Bikes</span>
                                </div>
                                <div class="stat-box">
                                    <span class="stat-number">${s.docks}</span>
                                    <span class="stat-label">Open Docks</span>
                                </div>
                            </div>
                        </div>
                    `;
                });

                container.innerHTML = html;

            } catch (error) {
                console.error(error);
                container.innerHTML = `<p style="text-align:center; font-size:40px; color:red;">Error loading data.</p>`;
            }
        }

        // Run once on load
        loadBluebikesData();
    </script>
</body>
</html>
